[gd_scene load_steps=34 format=3 uid="uid://dittc4eifec6w"]

[ext_resource type="Script" path="res://Scripts/Utility Scripts/Level.gd" id="1_13gf8"]
[ext_resource type="PackedScene" uid="uid://d0ff35cm57xb7" path="res://Scene Objects/Effects/DroppedFragment.tscn" id="2_6ibby"]
[ext_resource type="PackedScene" uid="uid://c6qw77ovfwgfs" path="res://Player.tscn" id="3_xe4pj"]
[ext_resource type="PackedScene" uid="uid://bdypi7w73c6kq" path="res://Scene Objects/UI/TemperMeterUI.tscn" id="4_dtwdr"]
[ext_resource type="PackedScene" uid="uid://cg3dhm1wv5w67" path="res://Scene Objects/UI/MagicMeterUI.tscn" id="5_aamjr"]
[ext_resource type="PackedScene" uid="uid://vmiu4klr3ywc" path="res://Scene Objects/UI/FragmentCounterUI.tscn" id="6_mhsti"]
[ext_resource type="PackedScene" uid="uid://b5wwivjk8sl7b" path="res://Scene Objects/Misc/ClearTimer.tscn" id="7_n4e8n"]
[ext_resource type="PackedScene" uid="uid://cp0fhjbp5c5xx" path="res://Level Scenes/CH2_LV3/Rooms/CH2_LV3_R4.tscn" id="7_vdrf6"]
[ext_resource type="PackedScene" uid="uid://dsugj5fjisglo" path="res://Level Scenes/CH2_LV3/Rooms/CH2_LV3_R5.tscn" id="8_ghwuo"]
[ext_resource type="PackedScene" uid="uid://buykytsdrlnsg" path="res://Scene Objects/Misc/ResultsScreen.tscn" id="8_u735p"]
[ext_resource type="PackedScene" uid="uid://d1eef1xjuwf3b" path="res://Menu Scenes/PauseMenu.tscn" id="9_req0l"]
[ext_resource type="PackedScene" uid="uid://dpbcs4ynf8pba" path="res://Level Scenes/CH2_LV3/Rooms/CH2_LV3_R6.tscn" id="9_vrj57"]
[ext_resource type="PackedScene" uid="uid://dkrriec303682" path="res://Level Scenes/CH2_LV3/Rooms/CH2_LV3_R7.tscn" id="10_7wxhu"]
[ext_resource type="PackedScene" uid="uid://8beel2odcuky" path="res://Scene Objects/Effects/ScreenFade.tscn" id="10_v2elo"]
[ext_resource type="PackedScene" uid="uid://brhoroc2w6jwi" path="res://Scene Objects/UI/Textbox.tscn" id="11_6hykn"]
[ext_resource type="PackedScene" uid="uid://ca4v88yik2xe" path="res://Scene Objects/Misc/LevelIntroScreen.tscn" id="11_lycuj"]
[ext_resource type="PackedScene" uid="uid://btq4qla5fyq0n" path="res://Scene Objects/Misc/LevelMusicPlayer.tscn" id="12_f04gt"]
[ext_resource type="PackedScene" uid="uid://bjeiexqfc7oht" path="res://Scene Objects/Misc/DefeatScreen.tscn" id="13_vfsv1"]
[ext_resource type="PackedScene" uid="uid://cawcebumcenpi" path="res://Level Scenes/CH2_LV3/Rooms/CH2_LV3_R1.tscn" id="14_2pbtd"]
[ext_resource type="PackedScene" uid="uid://u8e1fwrtc1mm" path="res://Level Scenes/CH2_LV3/Rooms/CH2_LV3_R2.tscn" id="16_2c4qm"]
[ext_resource type="PackedScene" uid="uid://bgwmmnhqig3g2" path="res://Level Scenes/CH2_LV3/Rooms/CH2_LV3_R3.tscn" id="17_cvotr"]
[ext_resource type="PackedScene" uid="uid://btqjqkpg02mic" path="res://Level Scenes/CH2_LV3/Rooms/CH2_LV3_R8.tscn" id="22_4hlsg"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_k23s2"]
resource_local_to_scene = true
radius = 8.0
height = 48.0

[sub_resource type="Curve2D" id="Curve2D_37y1e"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 96)
}
point_count = 2

[sub_resource type="Curve2D" id="Curve2D_7a2g8"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 160, 0, 0, 0, 0, 160, 160, 0, 0, 0, 0, 160, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 5

[sub_resource type="Curve2D" id="Curve2D_yy40b"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -160, 0, 0, 0, 0, -160, -160, 0, 0, 0, 0, -160, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 5

[sub_resource type="Curve2D" id="Curve2D_cq4gk"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -160, 0, 0, 0, 0, -160, -160, 0, 0, 0, 0, -160, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 5

[sub_resource type="Curve2D" id="Curve2D_qde6x"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -128, 0)
}
point_count = 2

[sub_resource type="Curve2D" id="Curve2D_dj7bb"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -128, 0, 0, 0, 0, -128, -128, 0, 0, 0, 0, -128, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 5

[sub_resource type="Curve2D" id="Curve2D_8kyjn"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -64, 0, 0, 0, 0, 0, -64, -128, 0, 0, 0, 0, 64, -128, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 6

[sub_resource type="Curve2D" id="Curve2D_eex0g"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -128, 0)
}
point_count = 2

[sub_resource type="Curve2D" id="Curve2D_hpoix"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 128, 0, 0, 0, 0, 0, 128, -64, 0, 0, 0, 0, 0, -64, 0, 0, 0, 0, 0, 0)
}
point_count = 5

[sub_resource type="Curve2D" id="Curve2D_cqeig"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0)
}
point_count = 2

[node name="CH2_LV3" type="Node2D" node_paths=PackedStringArray("player_reference", "starting_room", "room_list", "magical_scale", "screen_fade", "intro_screen", "clear_timer")]
script = ExtResource("1_13gf8")
player_reference = NodePath("Player")
starting_room = NodePath("CH2_LV3_R1")
starting_room_entrance_index = 1
room_list = [NodePath("CH2_LV3_R1"), NodePath("CH2_LV3_R2"), NodePath("CH2_LV3_R3"), NodePath("CH2_LV3_R4"), NodePath("CH2_LV3_R5"), NodePath("CH2_LV3_R6"), NodePath("CH2_LV3_R7"), NodePath("CH2_LV3_R8")]
magical_scale = NodePath("CH2_LV3_R5/CollectableScale")
dropped_fragment_scene = ExtResource("2_6ibby")
screen_fade = NodePath("UI_Canvas/ScreenFade")
intro_screen = NodePath("UI_Canvas/LevelIntroScreen")
clear_timer = NodePath("UI_Canvas/ClearTimer")

[node name="Player" parent="." instance=ExtResource("3_xe4pj")]
position = Vector2(96, 223)

[node name="Fairy" parent="Player/Hub" index="4"]
is_using_fairy = true

[node name="Camera" parent="Player/Hub" index="12" node_paths=PackedStringArray("player_cam")]
player_cam = NodePath("../../../Camera2D")

[node name="CollisionShape2D" parent="Player" index="4"]
shape = SubResource("CapsuleShape2D_k23s2")

[node name="Camera2D" type="Camera2D" parent="."]
process_callback = 0
drag_left_margin = 0.0
drag_top_margin = 0.6
drag_right_margin = 0.0
editor_draw_limits = true
editor_draw_drag_margin = true

[node name="CH2_LV3_R1" parent="." instance=ExtResource("14_2pbtd")]

[node name="WarpDoor" parent="CH2_LV3_R1" index="2" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV3_R2")

[node name="CH2_LV3_R2" parent="." instance=ExtResource("16_2c4qm")]
position = Vector2(1536, 352)

[node name="WarpDoor" parent="CH2_LV3_R2" index="2" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV3_R1")

[node name="ElevatorSelector" parent="CH2_LV3_R2" index="5" node_paths=PackedStringArray("room_destinations")]
room_destinations = [NodePath("../../CH2_LV3_R1"), NodePath("../../CH2_LV3_R3"), NodePath("../../CH2_LV3_R6")]
initial_locked_rooms = 1

[node name="CH2_LV3_R3" parent="." instance=ExtResource("17_cvotr")]
position = Vector2(1536, -576)

[node name="WarpDoor" parent="CH2_LV3_R3" index="3" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV3_R2")

[node name="WarpDoor2" parent="CH2_LV3_R3" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV3_R5")
room_entrance_index = 0

[node name="WarpDoor3" parent="CH2_LV3_R3" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV3_R4")
room_entrance_index = 0

[node name="FallWarp" parent="CH2_LV3_R3" index="6" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV3_R1")
room_entrance_index = 2

[node name="CH2_LV3_R4" parent="." instance=ExtResource("7_vdrf6")]
position = Vector2(-1152, -576)

[node name="Warp 0" parent="CH2_LV3_R4" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV3_R3")
room_entrance_index = 2

[node name="CH2_LV3_R5" parent="." instance=ExtResource("8_ghwuo")]
position = Vector2(4224, -576)

[node name="Warp 0" parent="CH2_LV3_R5" index="3" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV3_R3")
room_entrance_index = 1

[node name="FallWarp" parent="CH2_LV3_R5" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV3_R1")
room_entrance_index = 2

[node name="CH2_LV3_R6" parent="." instance=ExtResource("9_vrj57")]
position = Vector2(1536, -1168)

[node name="WarpDoor" parent="CH2_LV3_R6" index="3" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV3_R2")

[node name="WarpDoor2" parent="CH2_LV3_R6" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV3_R8")
room_entrance_index = 0

[node name="WarpDoor3" parent="CH2_LV3_R6" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV3_R7")
room_entrance_index = 0

[node name="FallWarp" parent="CH2_LV3_R6" index="6" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV3_R1")
room_entrance_index = 2

[node name="MovingPlatform" parent="CH2_LV3_R6/Platforms" index="0"]
curve = SubResource("Curve2D_37y1e")

[node name="MovingPlatform2" parent="CH2_LV3_R6/Platforms" index="1"]
curve = SubResource("Curve2D_7a2g8")

[node name="MovingPlatform3" parent="CH2_LV3_R6/Platforms" index="2"]
curve = SubResource("Curve2D_yy40b")

[node name="MovingPlatform4" parent="CH2_LV3_R6/Platforms" index="3"]
curve = SubResource("Curve2D_cq4gk")

[node name="CH2_LV3_R7" parent="." instance=ExtResource("10_7wxhu")]
position = Vector2(-1152, -1168)

[node name="Warp 0" parent="CH2_LV3_R7" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV3_R6")
room_entrance_index = 2

[node name="MovingPlatform" parent="CH2_LV3_R7/Platforms" index="1"]
curve = SubResource("Curve2D_qde6x")

[node name="MovingPlatform2" parent="CH2_LV3_R7/Platforms" index="3"]
curve = SubResource("Curve2D_dj7bb")

[node name="MovingPlatform3" parent="CH2_LV3_R7/Platforms" index="7"]
curve = SubResource("Curve2D_8kyjn")

[node name="CH2_LV3_R8" parent="." instance=ExtResource("22_4hlsg")]
position = Vector2(4224, -1168)

[node name="Warp 0" parent="CH2_LV3_R8" index="3" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV3_R6")
room_entrance_index = 1

[node name="FallWarp" parent="CH2_LV3_R8" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV3_R1")
room_entrance_index = 2

[node name="MovingPlatform" parent="CH2_LV3_R8/Platforms" index="0"]
curve = SubResource("Curve2D_eex0g")

[node name="MovingPlatform2" parent="CH2_LV3_R8/Platforms" index="2"]
curve = SubResource("Curve2D_hpoix")

[node name="MovingPlatform3" parent="CH2_LV3_R8/Platforms" index="4"]
curve = SubResource("Curve2D_cqeig")

[node name="UI_Canvas" type="CanvasLayer" parent="."]

[node name="TemperMeterUI" parent="UI_Canvas" node_paths=PackedStringArray("player_node") instance=ExtResource("4_dtwdr")]
position = Vector2(1, 8)
player_node = NodePath("../../Player")

[node name="MagicMeterUI" parent="UI_Canvas" node_paths=PackedStringArray("player_node") instance=ExtResource("5_aamjr")]
position = Vector2(88, 40)
player_node = NodePath("../../Player")

[node name="FragmentCounterUI" parent="UI_Canvas" node_paths=PackedStringArray("player_node", "level_ref") instance=ExtResource("6_mhsti")]
position = Vector2(512, 0)
player_node = NodePath("../../Player")
level_ref = NodePath("../..")

[node name="ClearTimer" parent="UI_Canvas" instance=ExtResource("7_n4e8n")]
position = Vector2(4, 316)

[node name="ResultsScreen" parent="UI_Canvas" node_paths=PackedStringArray("screen_fade", "level", "clear_timer") instance=ExtResource("8_u735p")]
screen_fade = NodePath("../ScreenFade")
level = NodePath("../..")
clear_timer = NodePath("../ClearTimer")

[node name="PauseMenu" parent="UI_Canvas" node_paths=PackedStringArray("screen_fade") instance=ExtResource("9_req0l")]
screen_fade = NodePath("../ScreenFade")

[node name="ScreenFade" parent="UI_Canvas" instance=ExtResource("10_v2elo")]
starting_fade_duration = 1.0

[node name="LevelIntroScreen" parent="UI_Canvas" instance=ExtResource("11_lycuj")]
chapter_char = "2"
section_char = "3"
level_name_left = "Magi Co."
level_name_right = "Mayhem"
subtitle_text = "Time to clock 'em out!"

[node name="Textbox" parent="." node_paths=PackedStringArray("ui_canvas") instance=ExtResource("11_6hykn")]
accept_input_events = false
ui_canvas = NodePath("../UI_Canvas")

[node name="LevelMusicPlayer" parent="." instance=ExtResource("12_f04gt")]

[node name="DefeatScreen" parent="." node_paths=PackedStringArray("screen_fade") instance=ExtResource("13_vfsv1")]
screen_fade = NodePath("../UI_Canvas/ScreenFade")

[connection signal="player_defeated" from="." to="UI_Canvas/TemperMeterUI" method="hide"]
[connection signal="player_defeated" from="." to="UI_Canvas/MagicMeterUI" method="hide"]
[connection signal="player_defeated" from="." to="UI_Canvas/FragmentCounterUI" method="hide"]
[connection signal="player_defeated" from="." to="UI_Canvas/ClearTimer" method="hide"]
[connection signal="player_defeated" from="." to="UI_Canvas/ClearTimer" method="stop_timer"]
[connection signal="player_defeated" from="." to="Textbox" method="hide_textbox"]
[connection signal="player_defeated" from="." to="LevelMusicPlayer" method="stop"]
[connection signal="player_defeated" from="." to="DefeatScreen" method="do_defeat_screen"]
[connection signal="button_pressed" from="CH2_LV3_R5/SignalButton" to="CH2_LV3_R2/ElevatorSelector" method="unlock_next_room"]
[connection signal="button_pressed" from="CH2_LV3_R8/SignalButton" to="CH2_LV3_R2/ElevatorSelector" method="unlock_next_room"]

[editable path="Player"]
[editable path="CH2_LV3_R1"]
[editable path="CH2_LV3_R2"]
[editable path="CH2_LV3_R3"]
[editable path="CH2_LV3_R3/FallWarp"]
[editable path="CH2_LV3_R4"]
[editable path="CH2_LV3_R5"]
[editable path="CH2_LV3_R5/FallWarp"]
[editable path="CH2_LV3_R6"]
[editable path="CH2_LV3_R6/FallWarp"]
[editable path="CH2_LV3_R7"]
[editable path="CH2_LV3_R8"]
[editable path="CH2_LV3_R8/FallWarp"]
