[gd_scene load_steps=32 format=3 uid="uid://b3xydwwisx5df"]

[ext_resource type="Script" path="res://Scripts/Utility Scripts/Level.gd" id="1_cfapw"]
[ext_resource type="PackedScene" uid="uid://d0ff35cm57xb7" path="res://Scene Objects/Effects/DroppedFragment.tscn" id="2_kw5gh"]
[ext_resource type="PackedScene" uid="uid://c6qw77ovfwgfs" path="res://Player.tscn" id="3_yffxu"]
[ext_resource type="PackedScene" uid="uid://jhtcdnyje6hg" path="res://Level Scenes/CH2_LV1/Rooms/CH2_LV1_R1.tscn" id="4_8agxn"]
[ext_resource type="PackedScene" uid="uid://bdypi7w73c6kq" path="res://Scene Objects/UI/TemperMeterUI.tscn" id="4_gscni"]
[ext_resource type="PackedScene" uid="uid://cg3dhm1wv5w67" path="res://Scene Objects/UI/MagicMeterUI.tscn" id="5_5xkdp"]
[ext_resource type="PackedScene" uid="uid://sh5tjbrvgfi6" path="res://Level Scenes/CH2_LV1/Rooms/CH2_LV1_R2.tscn" id="5_tum2n"]
[ext_resource type="PackedScene" uid="uid://dsddhw2ng264h" path="res://Level Scenes/CH2_LV1/Rooms/CH2_LV1_R3.tscn" id="6_3bc5p"]
[ext_resource type="PackedScene" uid="uid://vmiu4klr3ywc" path="res://Scene Objects/UI/FragmentCounterUI.tscn" id="6_qgwf6"]
[ext_resource type="PackedScene" uid="uid://b8lhm3ue8ikkg" path="res://Level Scenes/CH2_LV1/Rooms/CH2_LV1_R4.tscn" id="7_35dm7"]
[ext_resource type="PackedScene" uid="uid://b5wwivjk8sl7b" path="res://Scene Objects/Misc/ClearTimer.tscn" id="7_dllrt"]
[ext_resource type="PackedScene" uid="uid://b1jo5gnekcot0" path="res://Level Scenes/CH2_LV1/Rooms/CH2_LV1_R5.tscn" id="8_awkx0"]
[ext_resource type="PackedScene" uid="uid://buykytsdrlnsg" path="res://Scene Objects/Misc/ResultsScreen.tscn" id="8_thl0m"]
[ext_resource type="PackedScene" uid="uid://d1eef1xjuwf3b" path="res://Menu Scenes/PauseMenu.tscn" id="9_lw8gr"]
[ext_resource type="PackedScene" uid="uid://bqf14xmnhoso2" path="res://Level Scenes/CH2_LV1/Rooms/CH2_LV1_R7.tscn" id="10_e81d2"]
[ext_resource type="PackedScene" uid="uid://8beel2odcuky" path="res://Scene Objects/Effects/ScreenFade.tscn" id="10_f3sy7"]
[ext_resource type="PackedScene" uid="uid://brhoroc2w6jwi" path="res://Scene Objects/UI/Textbox.tscn" id="11_bg1mr"]
[ext_resource type="PackedScene" uid="uid://1ok1338bqxqn" path="res://Level Scenes/CH2_LV1/Rooms/CH2_LV1_R8.tscn" id="11_odqsr"]
[ext_resource type="PackedScene" uid="uid://btq4qla5fyq0n" path="res://Scene Objects/Misc/LevelMusicPlayer.tscn" id="12_nko8g"]
[ext_resource type="PackedScene" uid="uid://c52ld2bu585yu" path="res://Level Scenes/CH2_LV1/Rooms/CH2_LV1_R9.tscn" id="12_o2oaw"]
[ext_resource type="PackedScene" uid="uid://bjeiexqfc7oht" path="res://Scene Objects/Misc/DefeatScreen.tscn" id="13_caoew"]
[ext_resource type="PackedScene" uid="uid://b0ytlb5k78hf0" path="res://Level Scenes/CH2_LV1/Rooms/CH2_LV1_R10.tscn" id="13_j5mx5"]
[ext_resource type="PackedScene" uid="uid://7hckxw56tt36" path="res://Level Scenes/CH2_LV1/Rooms/CH2_LV1_R11.tscn" id="14_n6hoo"]
[ext_resource type="PackedScene" uid="uid://ca4v88yik2xe" path="res://Scene Objects/Misc/LevelIntroScreen.tscn" id="15_5cu2s"]
[ext_resource type="PackedScene" uid="uid://cl53keef7apeq" path="res://Level Scenes/CH2_LV1/Rooms/CH2_LV1_R15.tscn" id="18_8g7tx"]
[ext_resource type="PackedScene" uid="uid://ueu6cymswxum" path="res://Level Scenes/CH2_LV1/Rooms/CH2_LV1_R16.tscn" id="19_r4bb0"]
[ext_resource type="PackedScene" uid="uid://bgl2wr5iy54sg" path="res://Level Scenes/CH2_LV1/Rooms/CH2_LV1_R6.tscn" id="20_bjbny"]
[ext_resource type="PackedScene" uid="uid://pdikfxw1km32" path="res://Level Scenes/CH2_LV1/Rooms/CH2_LV1_R12.tscn" id="26_n7xnr"]
[ext_resource type="PackedScene" uid="uid://bw32ithamxecl" path="res://Level Scenes/CH2_LV1/Rooms/CH2_LV1_R13.tscn" id="27_xd7vc"]
[ext_resource type="PackedScene" uid="uid://cfvtw7uo22mje" path="res://Level Scenes/CH2_LV1/Rooms/CH2_LV1_R14.tscn" id="28_mnt2m"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_k23s2"]
resource_local_to_scene = true
radius = 8.0
height = 48.0

[node name="CH2_LV1" type="Node2D" node_paths=PackedStringArray("player_reference", "starting_room", "room_list", "magical_scale", "draconic_scale", "balanced_scale", "screen_fade", "intro_screen", "clear_timer")]
position = Vector2(1, 0)
script = ExtResource("1_cfapw")
level_index = 8
player_reference = NodePath("Player")
starting_room = NodePath("CH2_LV1_R1")
room_list = [NodePath("CH2_LV1_R1"), NodePath("CH2_LV1_R2"), NodePath("CH2_LV1_R3"), NodePath("CH2_LV1_R4"), NodePath("CH2_LV1_R5"), NodePath("CH2_LV1_R6"), NodePath("CH2_LV1_R7"), NodePath("CH2_LV1_R8"), NodePath("CH2_LV1_R9"), NodePath("CH2_LV1_R10"), NodePath("CH2_LV1_R11"), NodePath("CH2_LV1_R12"), NodePath("CH2_LV1_R13"), NodePath("CH2_LV1_R14"), NodePath("CH2_LV1_R15"), NodePath("CH2_LV1_R16")]
magical_scale = NodePath("CH2_LV1_R3/CollectableScale")
draconic_scale = NodePath("CH2_LV1_R10/CollectableScale")
balanced_scale = NodePath("CH2_LV1_R8/CollectableScale")
min_fragment_collection_rate = 0.635
dropped_fragment_scene = ExtResource("2_kw5gh")
screen_fade = NodePath("UI_Canvas/ScreenFade")
intro_screen = NodePath("UI_Canvas/LevelIntroScreen")
clear_timer = NodePath("UI_Canvas/ClearTimer")
time_to_beat = 180.0

[node name="Player" parent="." instance=ExtResource("3_yffxu")]
position = Vector2(96, 223)

[node name="Fairy" parent="Player/Hub" index="4"]
is_using_fairy = true

[node name="Camera" parent="Player/Hub" index="12" node_paths=PackedStringArray("player_cam")]
player_cam = NodePath("../../../Camera2D")

[node name="CollisionShape2D" parent="Player" index="4"]
shape = SubResource("CapsuleShape2D_k23s2")

[node name="Camera2D" type="Camera2D" parent="."]
process_callback = 0
drag_left_margin = 0.0
drag_top_margin = 0.6
drag_right_margin = 0.0
editor_draw_limits = true
editor_draw_drag_margin = true

[node name="CH2_LV1_R1" parent="." instance=ExtResource("4_8agxn")]
position = Vector2(-1, 0)

[node name="Warp 0" parent="CH2_LV1_R1" index="6" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R2")

[node name="CH2_LV1_R2" parent="." instance=ExtResource("5_tum2n")]
position = Vector2(736, 0)

[node name="Door 0" parent="CH2_LV1_R2" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R6")
room_entrance_index = 0

[node name="Door 1" parent="CH2_LV1_R2" index="6" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R5")
room_entrance_index = 0

[node name="Door 2" parent="CH2_LV1_R2" index="7" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R7")
room_entrance_index = 0

[node name="Warp 0" parent="CH2_LV1_R2" index="8" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R1")
room_entrance_index = 1

[node name="Warp 1" parent="CH2_LV1_R2" index="9" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R3")

[node name="Warp 2" parent="CH2_LV1_R2" index="10" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R4")

[node name="CH2_LV1_R3" parent="." instance=ExtResource("6_3bc5p")]
position = Vector2(1983, 0)

[node name="Warp 0" parent="CH2_LV1_R3" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R2")
room_entrance_index = 1

[node name="Warp 1" parent="CH2_LV1_R3" index="6" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R4")
room_entrance_index = 1

[node name="CH2_LV1_R4" parent="." instance=ExtResource("7_35dm7")]
position = Vector2(1247, -544)

[node name="Warp 0" parent="CH2_LV1_R4" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R2")
room_entrance_index = 2

[node name="Warp 1" parent="CH2_LV1_R4" index="6" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R3")
room_entrance_index = 1

[node name="CH2_LV1_R5" parent="." instance=ExtResource("8_awkx0")]
position = Vector2(191, -704)

[node name="Warp 0" parent="CH2_LV1_R5" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R2")
room_entrance_index = 4

[node name="CH2_LV1_R6" parent="." instance=ExtResource("20_bjbny")]
position = Vector2(95, -352)

[node name="Warp 0" parent="CH2_LV1_R6" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R2")
room_entrance_index = 3

[node name="CH2_LV1_R7" parent="." instance=ExtResource("10_e81d2")]
position = Vector2(991, 352)

[node name="Door 0" parent="CH2_LV1_R7" index="2" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R2")
room_entrance_index = 5

[node name="Door 1" parent="CH2_LV1_R7" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R11")
room_entrance_index = 0

[node name="Door 2" parent="CH2_LV1_R7" index="6" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R12")
room_entrance_index = 0

[node name="Warp 0" parent="CH2_LV1_R7" index="7" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R8")
room_entrance_index = 0

[node name="Warp 1" parent="CH2_LV1_R7" index="8" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R9")
room_entrance_index = 0

[node name="Checkpoint" parent="CH2_LV1_R7" index="9" node_paths=PackedStringArray("level_origin")]
level_origin = NodePath("../..")

[node name="CH2_LV1_R8" parent="." instance=ExtResource("11_odqsr")]
position = Vector2(1727, 352)

[node name="Warp 0" parent="CH2_LV1_R8" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R7")
room_entrance_index = 1

[node name="Warp 1" parent="CH2_LV1_R8" index="6" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R13")
room_entrance_index = 1

[node name="CH2_LV1_R9" parent="." instance=ExtResource("12_o2oaw")]
position = Vector2(255, 352)

[node name="Door 0" parent="CH2_LV1_R9" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R13")
room_entrance_index = 0

[node name="Warp 0" parent="CH2_LV1_R9" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R7")
room_entrance_index = 2

[node name="Warp 1" parent="CH2_LV1_R9" index="6" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R10")

[node name="CH2_LV1_R10" parent="." instance=ExtResource("13_j5mx5")]
position = Vector2(-737, 416)

[node name="Warp 0" parent="CH2_LV1_R10" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R9")
room_entrance_index = 1

[node name="CH2_LV1_R11" parent="." instance=ExtResource("14_n6hoo")]
position = Vector2(2623, 0)

[node name="Warp 0" parent="CH2_LV1_R11" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R7")
room_entrance_index = 3

[node name="CH2_LV1_R12" parent="." instance=ExtResource("26_n7xnr")]
position = Vector2(2527, 352)

[node name="Warp 0" parent="CH2_LV1_R12" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R7")
room_entrance_index = 4

[node name="CH2_LV1_R13" parent="." instance=ExtResource("27_xd7vc")]
position = Vector2(287, 800)

[node name="Door 0" parent="CH2_LV1_R13" index="2" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R9")
room_entrance_index = 2

[node name="Warp 0" parent="CH2_LV1_R13" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R8")
room_entrance_index = 1

[node name="Door 1" parent="CH2_LV1_R13" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R16")
room_entrance_index = 0

[node name="Door 2" parent="CH2_LV1_R13" index="6" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R14")
room_entrance_index = 0

[node name="Door 3" parent="CH2_LV1_R13" index="7" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R15")
room_entrance_index = 0

[node name="Checkpoint" parent="CH2_LV1_R13" index="11" node_paths=PackedStringArray("level_origin", "subsequent_checkpoints")]
level_origin = NodePath("../..")
subsequent_checkpoints = [NodePath("../../CH2_LV1_R7/Checkpoint")]

[node name="CH2_LV1_R14" parent="." instance=ExtResource("28_mnt2m")]
position = Vector2(2463, 800)

[node name="Warp 0" parent="CH2_LV1_R14" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R13")
room_entrance_index = 3

[node name="CH2_LV1_R15" parent="." instance=ExtResource("18_8g7tx")]
position = Vector2(-865, 800)

[node name="Warp 0" parent="CH2_LV1_R15" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R13")
room_entrance_index = 4

[node name="CH2_LV1_R16" parent="." instance=ExtResource("19_r4bb0")]
position = Vector2(287, 1056)

[node name="Warp 0" parent="CH2_LV1_R16" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV1_R13")
room_entrance_index = 2

[node name="HintBubble" parent="CH2_LV1_R16" index="7" node_paths=PackedStringArray("textbox")]
textbox = NodePath("../../Textbox")

[node name="UI_Canvas" type="CanvasLayer" parent="."]

[node name="TemperMeterUI" parent="UI_Canvas" node_paths=PackedStringArray("player_node") instance=ExtResource("4_gscni")]
position = Vector2(1, 8)
player_node = NodePath("../../Player")

[node name="MagicMeterUI" parent="UI_Canvas" node_paths=PackedStringArray("player_node") instance=ExtResource("5_5xkdp")]
position = Vector2(88, 40)
player_node = NodePath("../../Player")

[node name="FragmentCounterUI" parent="UI_Canvas" node_paths=PackedStringArray("player_node", "level_ref") instance=ExtResource("6_qgwf6")]
position = Vector2(512, 0)
player_node = NodePath("../../Player")
level_ref = NodePath("../..")

[node name="ClearTimer" parent="UI_Canvas" instance=ExtResource("7_dllrt")]
position = Vector2(4, 316)

[node name="ResultsScreen" parent="UI_Canvas" node_paths=PackedStringArray("screen_fade", "level", "clear_timer") instance=ExtResource("8_thl0m")]
screen_fade = NodePath("../ScreenFade")
level = NodePath("../..")
clear_timer = NodePath("../ClearTimer")

[node name="PauseMenu" parent="UI_Canvas" node_paths=PackedStringArray("screen_fade") instance=ExtResource("9_lw8gr")]
screen_fade = NodePath("../ScreenFade")

[node name="ScreenFade" parent="UI_Canvas" instance=ExtResource("10_f3sy7")]
starting_fade_duration = 1.0

[node name="LevelIntroScreen" parent="UI_Canvas" instance=ExtResource("15_5cu2s")]
chapter_char = "2"
section_char = "1"
level_name_left = "Hijacked"
level_name_right = "Household"
subtitle_text = "Drivin' out Dragoons!"

[node name="Textbox" parent="." node_paths=PackedStringArray("ui_canvas") instance=ExtResource("11_bg1mr")]
accept_input_events = false
ui_canvas = NodePath("../UI_Canvas")

[node name="LevelMusicPlayer" parent="." instance=ExtResource("12_nko8g")]

[node name="DefeatScreen" parent="." node_paths=PackedStringArray("screen_fade") instance=ExtResource("13_caoew")]
screen_fade = NodePath("../UI_Canvas/ScreenFade")

[connection signal="player_defeated" from="." to="UI_Canvas/TemperMeterUI" method="hide"]
[connection signal="player_defeated" from="." to="UI_Canvas/MagicMeterUI" method="hide"]
[connection signal="player_defeated" from="." to="UI_Canvas/FragmentCounterUI" method="hide"]
[connection signal="player_defeated" from="." to="UI_Canvas/ClearTimer" method="stop_timer"]
[connection signal="player_defeated" from="." to="UI_Canvas/ClearTimer" method="hide"]
[connection signal="player_defeated" from="." to="Textbox" method="hide_textbox"]
[connection signal="player_defeated" from="." to="LevelMusicPlayer" method="stop"]
[connection signal="player_defeated" from="." to="DefeatScreen" method="do_defeat_screen"]
[connection signal="checkpoint_activated" from="CH2_LV1_R7/Checkpoint" to="CH2_LV1_R2/Door 0" method="force_unlock"]
[connection signal="checkpoint_activated" from="CH2_LV1_R7/Checkpoint" to="CH2_LV1_R2/Door 1" method="force_unlock"]
[connection signal="checkpoint_activated" from="CH2_LV1_R7/Checkpoint" to="CH2_LV1_R2/Door 2" method="force_unlock"]
[connection signal="checkpoint_activated" from="CH2_LV1_R7/Checkpoint" to="CH2_LV1_R6/DoorKey" method="force_collect"]
[connection signal="on_break" from="CH2_LV1_R13/ReinforcedMagicBlock" to="CH2_LV1_R8/ReinforcedMagicBlock" method="queue_free"]
[connection signal="checkpoint_activated" from="CH2_LV1_R13/Checkpoint" to="CH2_LV1_R7/Door 1" method="force_unlock"]
[connection signal="checkpoint_activated" from="CH2_LV1_R13/Checkpoint" to="CH2_LV1_R7/Door 2" method="force_unlock"]
[connection signal="checkpoint_activated" from="CH2_LV1_R13/Checkpoint" to="CH2_LV1_R9/Door 0" method="force_unlock"]
[connection signal="checkpoint_activated" from="CH2_LV1_R13/Checkpoint" to="CH2_LV1_R12/DoorKey" method="force_collect"]
[connection signal="level_finished" from="CH2_LV1_R16/FinishLine" to="." method="level_finish"]
[connection signal="level_finished" from="CH2_LV1_R16/FinishLine" to="UI_Canvas/TemperMeterUI" method="hide"]
[connection signal="level_finished" from="CH2_LV1_R16/FinishLine" to="UI_Canvas/MagicMeterUI" method="hide"]
[connection signal="level_finished" from="CH2_LV1_R16/FinishLine" to="UI_Canvas/FragmentCounterUI" method="hide"]
[connection signal="level_finished" from="CH2_LV1_R16/FinishLine" to="UI_Canvas/ClearTimer" method="stop_timer"]
[connection signal="level_finished" from="CH2_LV1_R16/FinishLine" to="UI_Canvas/ClearTimer" method="hide"]
[connection signal="level_finished" from="CH2_LV1_R16/FinishLine" to="UI_Canvas/ResultsScreen" method="on_level_complete"]
[connection signal="level_finished" from="CH2_LV1_R16/FinishLine" to="LevelMusicPlayer" method="fade_out"]

[editable path="Player"]
[editable path="CH2_LV1_R1"]
[editable path="CH2_LV1_R2"]
[editable path="CH2_LV1_R2/Warp 2"]
[editable path="CH2_LV1_R3"]
[editable path="CH2_LV1_R4"]
[editable path="CH2_LV1_R4/Warp 0"]
[editable path="CH2_LV1_R5"]
[editable path="CH2_LV1_R6"]
[editable path="CH2_LV1_R7"]
[editable path="CH2_LV1_R8"]
[editable path="CH2_LV1_R8/Warp 1"]
[editable path="CH2_LV1_R9"]
[editable path="CH2_LV1_R10"]
[editable path="CH2_LV1_R11"]
[editable path="CH2_LV1_R12"]
[editable path="CH2_LV1_R13"]
[editable path="CH2_LV1_R13/Warp 0"]
[editable path="CH2_LV1_R14"]
[editable path="CH2_LV1_R15"]
[editable path="CH2_LV1_R16"]
