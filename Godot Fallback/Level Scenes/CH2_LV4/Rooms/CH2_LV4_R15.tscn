[gd_scene load_steps=15 format=4 uid="uid://brjl4odjo71u6"]

[ext_resource type="Script" path="res://Scripts/Utility Scripts/Room.gd" id="1_mwuon"]
[ext_resource type="TileSet" uid="uid://dhwi7i1loa2pd" path="res://Sprites/Tiles/Test Tiles/TestTileSet.tres" id="2_nrtay"]
[ext_resource type="PackedScene" uid="uid://vtyaphi47lrf" path="res://Scene Objects/Objects/Checkpoint.tscn" id="3_t6xyg"]
[ext_resource type="PackedScene" uid="uid://u5nios6kfqhs" path="res://Scene Objects/Objects/BossDragonFruitSpawner.tscn" id="4_br342"]
[ext_resource type="PackedScene" uid="uid://b03ie1oct07e3" path="res://Scene Objects/Obstacles/Fyerlarm.tscn" id="4_giqi4"]
[ext_resource type="PackedScene" uid="uid://durwtm4ocfbmv" path="res://Scene Objects/Objects/FinishLine.tscn" id="5_anfy1"]
[ext_resource type="PackedScene" uid="uid://bdnkqwt5cfajc" path="res://Scene Objects/Bosses/Impostor.tscn" id="6_imrbl"]
[ext_resource type="Script" path="res://Scripts/Utility Scripts/Trigger.gd" id="7_lh11b"]
[ext_resource type="PackedScene" uid="uid://btq4qla5fyq0n" path="res://Scene Objects/Misc/LevelMusicPlayer.tscn" id="8_iyawa"]
[ext_resource type="AudioStream" uid="uid://oxd2f117h1x2" path="res://Music/CH0/boss_loop.wav" id="9_365aa"]
[ext_resource type="PackedScene" uid="uid://b2a0ttqvejk51" path="res://Scene Objects/Objects/TemperDragonFruit.tscn" id="10_7t4pi"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_btani"]
size = Vector2(16, 320)

[sub_resource type="Curve2D" id="Curve2D_xdmkr"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 592, 80, 0, 0, 0, 0, 592, 0, 0, 0, 0, 0, 976, 0, 0, 0, 0, 0, 976, 112, 0, 0, 0, 0, 624, 112)
}
point_count = 5

[sub_resource type="Curve2D" id="Curve2D_mqu4i"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 976, 80, 0, 0, 0, 0, 976, 0, 0, 0, 0, 0, 592, 0, 0, 0, 0, 0, 592, 112, 0, 0, 0, 0, 944, 112)
}
point_count = 5

[node name="CH2_LV4_R15" type="Node2D" node_paths=PackedStringArray("tilemap_list", "room_entrances")]
script = ExtResource("1_mwuon")
tilemap_list = [NodePath("BoundaryCollisionTilemap"), NodePath("LevelCollisionTilemap")]
right_camera_limit = 2048
room_entrances = [NodePath("Entrance 0")]

[node name="BoundaryCollisionTilemap" type="Node2D" parent="."]
z_index = 4

[node name="Intangible" type="TileMapLayer" parent="BoundaryCollisionTilemap"]
z_index = -1
use_parent_material = true
tile_map_data = PackedByteArray("AAD//wUAAAADAAAAAAD//wYAAAADAAAAAAD//wcAAAADAAAAAAD//wgAAAADAAAAAAAQAP3/AAADAAAAAAAQAP7/AAADAAAAAAAQAP//AAADAAAAAAARAP3/AAADAAAAAAASAP3/AAADAAAAAAATAP3/AAADAAAAAAAUAP3/AAADAAAAAAAVAP3/AAADAAAAAAAWAP3/AAADAAAAAAAXAP3/AAADAAAAAAAYAP3/AAADAAAAAAAZAP3/AAADAAAAAAAaAP3/AAADAAAAAAAbAP3/AAADAAAAAAAcAP3/AAADAAAAAAAdAP3/AAADAAAAAAAeAP3/AAADAAAAAAAfAP3/AAADAAAAAAAfAP7/AAADAAAAAAAfAP//AAADAAAAAAAwAP3/AAADAAAAAAAwAP7/AAADAAAAAAAwAP//AAADAAAAAAAxAP3/AAADAAAAAAAyAP3/AAADAAAAAAAzAP3/AAADAAAAAAA0AP3/AAADAAAAAAA1AP3/AAADAAAAAAA2AP3/AAADAAAAAAA3AP3/AAADAAAAAAA4AP3/AAADAAAAAAA5AP3/AAADAAAAAAA6AP3/AAADAAAAAAA7AP3/AAADAAAAAAA8AP3/AAADAAAAAAA9AP3/AAADAAAAAAA+AP3/AAADAAAAAAA/AP3/AAADAAAAAAA/AP7/AAADAAAAAAA/AP//AAADAAAAAAA=")
tile_set = ExtResource("2_nrtay")
rendering_quadrant_size = 32
metadata/Tag = "IntangibleWall"

[node name="LevelCollisionTilemap" type="Node2D" parent="."]
visibility_layer = 4
z_index = 3

[node name="Decoration" type="TileMapLayer" parent="LevelCollisionTilemap"]
use_parent_material = true
tile_set = ExtResource("2_nrtay")
rendering_quadrant_size = 32

[node name="Background" type="TileMapLayer" parent="LevelCollisionTilemap"]
z_index = -1
use_parent_material = true
tile_set = ExtResource("2_nrtay")

[node name="Ground" type="TileMapLayer" parent="LevelCollisionTilemap"]
modulate = Color(0.0745098, 0.113725, 0.301961, 1)
z_index = -1
use_parent_material = true
tile_map_data = PackedByteArray("AAAAAAAAAAADAAAAAAAAAAEAAAADAAAAAAAAAAIAAAADAAAAAAAAAAMAAAADAAAAAAAAAAQAAAADAAAAAAAAAAUAAAADAAAAAAAAAAgAAAADAAAAAAAAAAkAAAADAAAAAAABAAAAAAADAAAAAAABAAEAAAADAAAAAAABAAIAAAADAAAAAAABAAMAAAADAAAAAAABAAQAAAADAAAAAAABAAUAAAADAAAAAAABAAgAAAADAAAAAAABAAkAAAADAAAAAAACAAAAAAADAAAAAAACAAEAAAADAAAAAAACAAIAAAADAAAAAAACAAMAAAADAAAAAAACAAQAAAADAAAAAAACAAUAAAADAAAAAAACAAgAAAADAAAAAAACAAkAAAADAAAAAAADAAAAAAADAAAAAAADAAEAAAADAAAAAAADAAIAAAADAAAAAAADAAMAAAADAAAAAAADAAQAAAADAAAAAAADAAUAAAADAAAAAAADAAgAAAADAAAAAAADAAkAAAADAAAAAAAEAAAAAAADAAAAAAAEAAEAAAADAAAAAAAEAAIAAAADAAAAAAAEAAMAAAADAAAAAAAEAAQAAAADAAAAAAAEAAUAAAADAAAAAAAEAAgAAAADAAAAAAAEAAkAAAADAAAAAAAFAAAAAAADAAAAAAAFAAEAAAADAAAAAAAFAAIAAAADAAAAAAAFAAMAAAADAAAAAAAFAAQAAAADAAAAAAAFAAUAAAADAAAAAAAFAAgAAAADAAAAAAAFAAkAAAADAAAAAAAGAAAAAAADAAAAAAAGAAEAAAADAAAAAAAGAAIAAAADAAAAAAAGAAMAAAADAAAAAAAGAAQAAAADAAAAAAAGAAUAAAADAAAAAAAGAAgAAAADAAAAAAAGAAkAAAADAAAAAAAHAAAAAAADAAAAAAAHAAEAAAADAAAAAAAHAAIAAAADAAAAAAAHAAMAAAADAAAAAAAHAAQAAAADAAAAAAAHAAUAAAADAAAAAAAHAAgAAAADAAAAAAAHAAkAAAADAAAAAAAIAAAAAAADAAAAAAAIAAEAAAADAAAAAAAIAAIAAAADAAAAAAAIAAMAAAADAAAAAAAIAAQAAAADAAAAAAAIAAUAAAADAAAAAAAIAAgAAAADAAAAAAAIAAkAAAADAAAAAAAJAAAAAAADAAAAAAAJAAEAAAADAAAAAAAJAAIAAAADAAAAAAAJAAMAAAADAAAAAAAJAAQAAAADAAAAAAAJAAUAAAADAAAAAAAJAAgAAAADAAAAAAAJAAkAAAADAAAAAAAKAAAAAAADAAAAAAAKAAEAAAADAAAAAAAKAAIAAAADAAAAAAAKAAMAAAADAAAAAAAKAAQAAAADAAAAAAAKAAUAAAADAAAAAAAKAAgAAAADAAAAAAAKAAkAAAADAAAAAAALAAAAAAADAAAAAAALAAEAAAADAAAAAAALAAIAAAADAAAAAAALAAMAAAADAAAAAAALAAQAAAADAAAAAAALAAUAAAADAAAAAAALAAgAAAADAAAAAAALAAkAAAADAAAAAAAMAAAAAAADAAAAAAAMAAEAAAADAAAAAAAMAAIAAAADAAAAAAAMAAMAAAADAAAAAAAMAAQAAAADAAAAAAAMAAUAAAADAAAAAAAMAAgAAAADAAAAAAAMAAkAAAADAAAAAAANAAAAAAADAAAAAAANAAEAAAADAAAAAAANAAIAAAADAAAAAAANAAMAAAADAAAAAAANAAQAAAADAAAAAAANAAUAAAADAAAAAAANAAgAAAADAAAAAAANAAkAAAADAAAAAAAOAAAAAAADAAAAAAAOAAEAAAADAAAAAAAOAAIAAAADAAAAAAAOAAMAAAADAAAAAAAOAAQAAAADAAAAAAAOAAUAAAADAAAAAAAOAAgAAAADAAAAAAAOAAkAAAADAAAAAAAPAAAAAAADAAAAAAAPAAEAAAADAAAAAAAPAAIAAAADAAAAAAAPAAMAAAADAAAAAAAPAAQAAAADAAAAAAAPAAUAAAADAAAAAAAPAAgAAAADAAAAAAAPAAkAAAADAAAAAAAQAAAAAAADAAAAAAAQAAEAAAADAAAAAAAQAAIAAAADAAAAAAAQAAMAAAADAAAAAAAQAAQAAAADAAAAAAAQAAUAAAADAAAAAAAQAAgAAAADAAAAAAAQAAkAAAADAAAAAAARAAgAAAADAAAAAAARAAkAAAADAAAAAAASAAgAAAADAAAAAAASAAkAAAADAAAAAAATAAgAAAADAAAAAAATAAkAAAADAAAAAAAUAAgAAAADAAAAAAAUAAkAAAADAAAAAAAVAAgAAAADAAAAAAAVAAkAAAADAAAAAAAWAAgAAAADAAAAAAAWAAkAAAADAAAAAAAXAAgAAAADAAAAAAAXAAkAAAADAAAAAAAYAAgAAAADAAAAAAAYAAkAAAADAAAAAAAZAAgAAAADAAAAAAAZAAkAAAADAAAAAAAaAAgAAAADAAAAAAAaAAkAAAADAAAAAAAbAAgAAAADAAAAAAAbAAkAAAADAAAAAAAcAAgAAAADAAAAAAAcAAkAAAADAAAAAAAdAAgAAAADAAAAAAAdAAkAAAADAAAAAAAeAAgAAAADAAAAAAAeAAkAAAADAAAAAAAfAAAAAAADAAAAAAAfAAEAAAADAAAAAAAfAAIAAAADAAAAAAAfAAMAAAADAAAAAAAfAAQAAAADAAAAAAAfAAUAAAADAAAAAAAfAAgAAAADAAAAAAAfAAkAAAADAAAAAAAgAAAAAAADAAAAAAAgAAEAAAADAAAAAAAgAAIAAAADAAAAAAAgAAMAAAADAAAAAAAgAAQAAAADAAAAAAAgAAUAAAADAAAAAAAgAAgAAAADAAAAAAAgAAkAAAADAAAAAAAhAAAAAAADAAAAAAAhAAEAAAADAAAAAAAhAAIAAAADAAAAAAAhAAMAAAADAAAAAAAhAAQAAAADAAAAAAAhAAUAAAADAAAAAAAhAAgAAAADAAAAAAAhAAkAAAADAAAAAAAiAAAAAAADAAAAAAAiAAEAAAADAAAAAAAiAAIAAAADAAAAAAAiAAMAAAADAAAAAAAiAAQAAAADAAAAAAAiAAUAAAADAAAAAAAiAAgAAAADAAAAAAAiAAkAAAADAAAAAAAjAAAAAAADAAAAAAAjAAEAAAADAAAAAAAjAAIAAAADAAAAAAAjAAMAAAADAAAAAAAjAAQAAAADAAAAAAAjAAUAAAADAAAAAAAjAAgAAAADAAAAAAAjAAkAAAADAAAAAAAkAAAAAAADAAAAAAAkAAEAAAADAAAAAAAkAAIAAAADAAAAAAAkAAMAAAADAAAAAAAkAAQAAAADAAAAAAAkAAUAAAADAAAAAAAkAAgAAAADAAAAAAAkAAkAAAADAAAAAAAlAAAAAAADAAAAAAAlAAEAAAADAAAAAAAlAAIAAAADAAAAAAAlAAMAAAADAAAAAAAlAAQAAAADAAAAAAAlAAUAAAADAAAAAAAlAAgAAAADAAAAAAAlAAkAAAADAAAAAAAmAAAAAAADAAAAAAAmAAEAAAADAAAAAAAmAAIAAAADAAAAAAAmAAMAAAADAAAAAAAmAAQAAAADAAAAAAAmAAUAAAADAAAAAAAmAAgAAAADAAAAAAAmAAkAAAADAAAAAAAnAAAAAAADAAAAAAAnAAEAAAADAAAAAAAnAAIAAAADAAAAAAAnAAMAAAADAAAAAAAnAAQAAAADAAAAAAAnAAUAAAADAAAAAAAnAAgAAAADAAAAAAAnAAkAAAADAAAAAAAoAAAAAAADAAAAAAAoAAEAAAADAAAAAAAoAAIAAAADAAAAAAAoAAMAAAADAAAAAAAoAAQAAAADAAAAAAAoAAUAAAADAAAAAAAoAAgAAAADAAAAAAAoAAkAAAADAAAAAAApAAAAAAADAAAAAAApAAEAAAADAAAAAAApAAIAAAADAAAAAAApAAMAAAADAAAAAAApAAQAAAADAAAAAAApAAUAAAADAAAAAAApAAgAAAADAAAAAAApAAkAAAADAAAAAAAqAAAAAAADAAAAAAAqAAEAAAADAAAAAAAqAAIAAAADAAAAAAAqAAMAAAADAAAAAAAqAAQAAAADAAAAAAAqAAUAAAADAAAAAAAqAAgAAAADAAAAAAAqAAkAAAADAAAAAAArAAAAAAADAAAAAAArAAEAAAADAAAAAAArAAIAAAADAAAAAAArAAMAAAADAAAAAAArAAQAAAADAAAAAAArAAUAAAADAAAAAAArAAgAAAADAAAAAAArAAkAAAADAAAAAAAsAAAAAAADAAAAAAAsAAEAAAADAAAAAAAsAAIAAAADAAAAAAAsAAMAAAADAAAAAAAsAAQAAAADAAAAAAAsAAUAAAADAAAAAAAsAAgAAAADAAAAAAAsAAkAAAADAAAAAAAtAAAAAAADAAAAAAAtAAEAAAADAAAAAAAtAAIAAAADAAAAAAAtAAMAAAADAAAAAAAtAAQAAAADAAAAAAAtAAUAAAADAAAAAAAtAAgAAAADAAAAAAAtAAkAAAADAAAAAAAuAAAAAAADAAAAAAAuAAEAAAADAAAAAAAuAAIAAAADAAAAAAAuAAMAAAADAAAAAAAuAAQAAAADAAAAAAAuAAUAAAADAAAAAAAuAAgAAAADAAAAAAAuAAkAAAADAAAAAAAvAAAAAAADAAAAAAAvAAEAAAADAAAAAAAvAAIAAAADAAAAAAAvAAMAAAADAAAAAAAvAAQAAAADAAAAAAAvAAUAAAADAAAAAAAvAAgAAAADAAAAAAAvAAkAAAADAAAAAAAwAAAAAAADAAAAAAAwAAIAAAADAAAAAAAwAAMAAAADAAAAAAAwAAQAAAADAAAAAAAwAAUAAAADAAAAAAAwAAgAAAADAAAAAAAwAAkAAAADAAAAAAAxAAgAAAADAAAAAAAxAAkAAAADAAAAAAAyAAgAAAADAAAAAAAyAAkAAAADAAAAAAAzAAgAAAADAAAAAAAzAAkAAAADAAAAAAA0AAgAAAADAAAAAAA0AAkAAAADAAAAAAA1AAgAAAADAAAAAAA1AAkAAAADAAAAAAA2AAgAAAADAAAAAAA2AAkAAAADAAAAAAA3AAgAAAADAAAAAAA3AAkAAAADAAAAAAA4AAgAAAADAAAAAAA4AAkAAAADAAAAAAA5AAgAAAADAAAAAAA5AAkAAAADAAAAAAA6AAgAAAADAAAAAAA6AAkAAAADAAAAAAA7AAgAAAADAAAAAAA7AAkAAAADAAAAAAA8AAgAAAADAAAAAAA8AAkAAAADAAAAAAA9AAgAAAADAAAAAAA9AAkAAAADAAAAAAA+AAgAAAADAAAAAAA+AAkAAAADAAAAAAA/AAAAAAADAAAAAAA/AAEAAAADAAAAAAA/AAIAAAADAAAAAAA/AAMAAAADAAAAAAA/AAQAAAADAAAAAAA/AAUAAAADAAAAAAA/AAYAAAADAAAAAAA/AAcAAAADAAAAAAA/AAgAAAADAAAAAAA/AAkAAAADAAAAAAAwAAEAAAADAAAAAAA=")
tile_set = ExtResource("2_nrtay")

[node name="Slopes" type="TileMapLayer" parent="LevelCollisionTilemap"]
modulate = Color(0.701961, 0.215686, 0.105882, 1)
z_index = -1
use_parent_material = true
tile_set = ExtResource("2_nrtay")

[node name="BossRoomBoundaryTilemap" type="Node2D" parent="."]
z_index = 3

[node name="DecorationL" type="TileMapLayer" parent="BossRoomBoundaryTilemap"]
use_parent_material = true
tile_map_data = PackedByteArray("AAAQAAYABwAAAAAAAAAQAAcABwAAAAAAAAA=")
enabled = false
tile_set = ExtResource("2_nrtay")
rendering_quadrant_size = 32

[node name="DecorationR" type="TileMapLayer" parent="BossRoomBoundaryTilemap"]
use_parent_material = true
tile_map_data = PackedByteArray("AAAfAAYABwAAAAAAAAAfAAcABwAAAAAAAAA=")
enabled = false
tile_set = ExtResource("2_nrtay")

[node name="CollisionL" type="TileMapLayer" parent="BossRoomBoundaryTilemap"]
modulate = Color(1, 1, 1, 0)
z_index = -1
use_parent_material = true
tile_map_data = PackedByteArray("AAAQAAYAAAADAAAAAAAQAAcAAAADAAAAAAA=")
enabled = false
tile_set = ExtResource("2_nrtay")

[node name="CollisionR" type="TileMapLayer" parent="BossRoomBoundaryTilemap"]
modulate = Color(1, 1, 1, 0)
use_parent_material = true
tile_map_data = PackedByteArray("AAAfAAYAAAADAAAAAAAfAAcAAAADAAAAAAA=")
enabled = false
tile_set = ExtResource("2_nrtay")

[node name="Entrance 0" type="Node2D" parent="."]
position = Vector2(16, 224)

[node name="Checkpoint" parent="." node_paths=PackedStringArray("room_origin") instance=ExtResource("3_t6xyg")]
position = Vector2(80, 224)
room_origin = NodePath("..")

[node name="BossDragonFruitSpawner" parent="." node_paths=PackedStringArray("dragonfruits", "boss", "room_origin") instance=ExtResource("4_br342")]
dragonfruits = [NodePath("../TemperDragonFruit")]
boss = NodePath("../Impostor")
room_origin = NodePath("..")

[node name="TemperDragonFruit" parent="." instance=ExtResource("10_7t4pi")]
position = Vector2(768, 96)
starting_state = 0
enable_respawning = false
start_despawned = true

[node name="Obstacles" type="Node2D" parent="."]

[node name="Fyerlarm" parent="Obstacles" instance=ExtResource("4_giqi4")]
position = Vector2(640, 160)

[node name="Fyerlarm2" parent="Obstacles" instance=ExtResource("4_giqi4")]
position = Vector2(896, 160)

[node name="BossActivationTrigger" type="Area2D" parent="." node_paths=PackedStringArray("shape")]
position = Vector2(700, 96)
collision_layer = 0
collision_mask = 4
script = ExtResource("7_lh11b")
shape = NodePath("CollisionShape2D")

[node name="CollisionShape2D" type="CollisionShape2D" parent="BossActivationTrigger"]
shape = SubResource("RectangleShape2D_btani")

[node name="FinishLine" parent="." instance=ExtResource("5_anfy1")]
position = Vector2(1792, 256)

[node name="Impostor" parent="." node_paths=PackedStringArray("fyerlarm_l", "fyerlarm_r", "boss_room", "boss_trigger", "boss_room_boundary_tilemap", "boss_music_player") instance=ExtResource("6_imrbl")]
position = Vector2(832, 208)
fyerlarm_l = NodePath("../Obstacles/Fyerlarm")
fyerlarm_r = NodePath("../Obstacles/Fyerlarm2")
boss_room = NodePath("..")
boss_trigger = NodePath("../BossActivationTrigger")
boss_room_boundary_tilemap = NodePath("../BossRoomBoundaryTilemap")
boss_music_player = NodePath("../BossMusicPlayer")

[node name="Phase1Knigel" parent="Impostor/StateMachine" index="2" node_paths=PackedStringArray("sword_throw_position_left", "sword_throw_position_right", "sword_throw_path_left", "sword_throw_path_right")]
sword_throw_position_left = NodePath("../../../BossPathing/SwordThrowL")
sword_throw_position_right = NodePath("../../../BossPathing/SwordThrowR")
sword_throw_path_left = NodePath("../../../BossPathing/SwordPathL")
sword_throw_path_right = NodePath("../../../BossPathing/SwordPathR")

[node name="Phase2Knigel" parent="Impostor/StateMachine" index="4" node_paths=PackedStringArray("arena_boundary_left", "arena_boundary_right", "fyerlarm_left", "fyerlarm_right")]
arena_boundary_left = NodePath("../../../BossPathing/ArenaBoundaryPointL")
arena_boundary_right = NodePath("../../../BossPathing/ArenaBoundaryPointR")
fyerlarm_left = NodePath("../../../Obstacles/Fyerlarm")
fyerlarm_right = NodePath("../../../Obstacles/Fyerlarm2")

[node name="Phase3Drickery" parent="Impostor/StateMachine" index="7" node_paths=PackedStringArray("flying_height_position")]
flying_height_position = NodePath("../../../BossPathing/FlyingHeight")

[node name="BossMusicPlayer" parent="." instance=ExtResource("8_iyawa")]
stream = ExtResource("9_365aa")
autoplay = false

[node name="BossPathing" type="Node2D" parent="."]
position = Vector2(-16, 112)

[node name="SwordThrowL" type="Node2D" parent="BossPathing"]
position = Vector2(592, 96)

[node name="SwordThrowR" type="Node2D" parent="BossPathing"]
position = Vector2(976, 96)

[node name="SwordPathL" type="Path2D" parent="BossPathing"]
curve = SubResource("Curve2D_xdmkr")

[node name="SwordPathR" type="Path2D" parent="BossPathing"]
curve = SubResource("Curve2D_mqu4i")

[node name="ArenaBoundaryPointL" type="Node2D" parent="BossPathing"]

[node name="ArenaBoundaryPointR" type="Node2D" parent="BossPathing"]

[node name="FlyingHeight" type="Node2D" parent="BossPathing"]
position = Vector2(784, -48)

[editable path="Impostor"]
