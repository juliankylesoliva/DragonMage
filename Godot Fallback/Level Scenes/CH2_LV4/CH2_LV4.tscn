[gd_scene load_steps=35 format=3 uid="uid://t2kj13lewrl"]

[ext_resource type="Script" path="res://Scripts/Utility Scripts/Level.gd" id="1_yggyj"]
[ext_resource type="PackedScene" uid="uid://d0ff35cm57xb7" path="res://Scene Objects/Effects/DroppedFragment.tscn" id="2_myit7"]
[ext_resource type="PackedScene" uid="uid://c6qw77ovfwgfs" path="res://Player.tscn" id="3_151t1"]
[ext_resource type="PackedScene" uid="uid://do0srmsvnyfw7" path="res://Level Scenes/CH2_LV4/Rooms/CH2_LV4_R1.tscn" id="4_a8ql6"]
[ext_resource type="PackedScene" uid="uid://bdypi7w73c6kq" path="res://Scene Objects/UI/TemperMeterUI.tscn" id="4_vkg70"]
[ext_resource type="PackedScene" uid="uid://cg3dhm1wv5w67" path="res://Scene Objects/UI/MagicMeterUI.tscn" id="5_1ttpi"]
[ext_resource type="PackedScene" uid="uid://vmiu4klr3ywc" path="res://Scene Objects/UI/FragmentCounterUI.tscn" id="6_53d36"]
[ext_resource type="PackedScene" uid="uid://33n5hlgn5o7i" path="res://Level Scenes/CH2_LV4/Rooms/CH2_LV4_R3.tscn" id="6_mfa2k"]
[ext_resource type="PackedScene" uid="uid://b5wwivjk8sl7b" path="res://Scene Objects/Misc/ClearTimer.tscn" id="7_41jhx"]
[ext_resource type="PackedScene" uid="uid://c4y5lq7mb6bqh" path="res://Level Scenes/CH2_LV4/Rooms/CH2_LV4_R4.tscn" id="7_obspq"]
[ext_resource type="PackedScene" uid="uid://xb0ey4q78gby" path="res://Level Scenes/CH2_LV4/Rooms/CH2_LV4_R5.tscn" id="8_7g06i"]
[ext_resource type="PackedScene" uid="uid://di5fs0jb3ua07" path="res://Level Scenes/CH2_LV4/Rooms/CH2_LV4_R7.tscn" id="8_7lx3v"]
[ext_resource type="PackedScene" uid="uid://buykytsdrlnsg" path="res://Scene Objects/Misc/ResultsScreen.tscn" id="8_7u3u6"]
[ext_resource type="PackedScene" uid="uid://ctu613c2h4c2b" path="res://Level Scenes/CH2_LV4/Rooms/CH2_LV4_R8.tscn" id="9_a73yn"]
[ext_resource type="PackedScene" uid="uid://dk5xj7ga1htid" path="res://Level Scenes/CH2_LV4/Rooms/CH2_LV4_R6.tscn" id="9_ofxth"]
[ext_resource type="PackedScene" uid="uid://d1eef1xjuwf3b" path="res://Menu Scenes/PauseMenu.tscn" id="9_xlu3u"]
[ext_resource type="PackedScene" uid="uid://8beel2odcuky" path="res://Scene Objects/Effects/ScreenFade.tscn" id="10_8ca3c"]
[ext_resource type="PackedScene" uid="uid://brhoroc2w6jwi" path="res://Scene Objects/UI/Textbox.tscn" id="11_nx3kn"]
[ext_resource type="PackedScene" uid="uid://ca4v88yik2xe" path="res://Scene Objects/Misc/LevelIntroScreen.tscn" id="11_ttojs"]
[ext_resource type="PackedScene" uid="uid://btq4qla5fyq0n" path="res://Scene Objects/Misc/LevelMusicPlayer.tscn" id="12_o50ci"]
[ext_resource type="PackedScene" uid="uid://bres6fuhnqslh" path="res://Level Scenes/CH2_LV4/Rooms/CH2_LV4_R9.tscn" id="12_un3l5"]
[ext_resource type="PackedScene" uid="uid://bn8cxoctb2f5" path="res://Level Scenes/CH2_LV4/Rooms/CH2_LV4_R10.tscn" id="13_nqouj"]
[ext_resource type="PackedScene" uid="uid://bjeiexqfc7oht" path="res://Scene Objects/Misc/DefeatScreen.tscn" id="13_w4xvx"]
[ext_resource type="PackedScene" uid="uid://cod85ofc4eq8g" path="res://Level Scenes/CH2_LV4/Rooms/CH2_LV4_R11.tscn" id="14_eaof6"]
[ext_resource type="PackedScene" uid="uid://r73mfltetrqo" path="res://Level Scenes/CH2_LV4/Rooms/CH2_LV4_R2.tscn" id="16_3ugfk"]
[ext_resource type="PackedScene" uid="uid://bqvx6tj40xkls" path="res://Level Scenes/CH2_LV4/Rooms/CH2_LV4_R13.tscn" id="16_jregu"]
[ext_resource type="PackedScene" uid="uid://c8g75jsc1ng17" path="res://Level Scenes/CH2_LV4/Rooms/CH2_LV4_R14.tscn" id="17_5ejir"]
[ext_resource type="PackedScene" uid="uid://brjl4odjo71u6" path="res://Level Scenes/CH2_LV4/Rooms/CH2_LV4_R15.tscn" id="18_lxpqh"]
[ext_resource type="PackedScene" uid="uid://d2sc2xp054g14" path="res://Level Scenes/CH2_LV4/Rooms/CH2_LV4_R12.tscn" id="26_tf8ny"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_k23s2"]
resource_local_to_scene = true
radius = 8.0
height = 48.0

[sub_resource type="Curve2D" id="Curve2D_xw261"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 128, 0, 0, 0, 0, 128, 128, 0, 0, 0, 0, 128, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 5

[sub_resource type="Curve2D" id="Curve2D_qughq"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 128, 0)
}
point_count = 2

[sub_resource type="Curve2D" id="Curve2D_06dn5"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 128, 0)
}
point_count = 2

[sub_resource type="Curve2D" id="Curve2D_83rjt"]
resource_local_to_scene = true
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 144, 0)
}
point_count = 2

[node name="CH2_LV4" type="Node2D" node_paths=PackedStringArray("player_reference", "starting_room", "room_list", "magical_scale", "draconic_scale", "balanced_scale", "screen_fade", "intro_screen", "clear_timer")]
script = ExtResource("1_yggyj")
level_index = 11
player_reference = NodePath("Player")
starting_room = NodePath("CH2_LV4_R1")
room_list = [NodePath("CH2_LV4_R1"), NodePath("CH2_LV4_R2"), NodePath("CH2_LV4_R3"), NodePath("CH2_LV4_R4"), NodePath("CH2_LV4_R5"), NodePath("CH2_LV4_R6"), NodePath("CH2_LV4_R7"), NodePath("CH2_LV4_R8"), NodePath("CH2_LV4_R9"), NodePath("CH2_LV4_R10"), NodePath("CH2_LV4_R11"), NodePath("CH2_LV4_R12"), NodePath("CH2_LV4_R13"), NodePath("CH2_LV4_R14"), NodePath("CH2_LV4_R15")]
magical_scale = NodePath("CH2_LV4_R6/CollectableScale")
draconic_scale = NodePath("CH2_LV4_R9/CollectableScale")
balanced_scale = NodePath("CH2_LV4_R12/Items/CollectableScale")
min_fragment_collection_rate = 0.64
dropped_fragment_scene = ExtResource("2_myit7")
screen_fade = NodePath("UI_Canvas/ScreenFade")
intro_screen = NodePath("UI_Canvas/LevelIntroScreen")
clear_timer = NodePath("UI_Canvas/ClearTimer")

[node name="Player" parent="." instance=ExtResource("3_151t1")]
position = Vector2(96, 223)

[node name="Fairy" parent="Player/Hub" index="4"]
is_using_fairy = true

[node name="Camera" parent="Player/Hub" index="12" node_paths=PackedStringArray("player_cam")]
player_cam = NodePath("../../../Camera2D")

[node name="CollisionShape2D" parent="Player" index="4"]
shape = SubResource("CapsuleShape2D_k23s2")

[node name="Camera2D" type="Camera2D" parent="."]
process_callback = 0
drag_left_margin = 0.0
drag_top_margin = 0.6
drag_right_margin = 0.0
editor_draw_limits = true
editor_draw_drag_margin = true

[node name="CH2_LV4_R1" parent="." instance=ExtResource("4_a8ql6")]

[node name="Warp 0" parent="CH2_LV4_R1" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R2")

[node name="CH2_LV4_R2" parent="." instance=ExtResource("16_3ugfk")]
position = Vector2(1152, -32)

[node name="Warp 0" parent="CH2_LV4_R2" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R1")

[node name="Warp 1" parent="CH2_LV4_R2" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R3")

[node name="CH2_LV4_R3" parent="." instance=ExtResource("6_mfa2k")]
position = Vector2(1792, -64)

[node name="Warp 0" parent="CH2_LV4_R3" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R2")

[node name="Warp 1" parent="CH2_LV4_R3" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R4")

[node name="CH2_LV4_R4" parent="." instance=ExtResource("7_obspq")]
position = Vector2(0, 480)

[node name="Warp 0" parent="CH2_LV4_R4" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R3")

[node name="Warp 1" parent="CH2_LV4_R4" index="6" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R5")

[node name="CH2_LV4_R5" parent="." instance=ExtResource("8_7g06i")]
position = Vector2(1152, 448)

[node name="Warp 0" parent="CH2_LV4_R5" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R4")

[node name="Warp 1" parent="CH2_LV4_R5" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R6")

[node name="CH2_LV4_R6" parent="." instance=ExtResource("9_ofxth")]
position = Vector2(1792, 416)

[node name="Warp 0" parent="CH2_LV4_R6" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R5")

[node name="Warp 1" parent="CH2_LV4_R6" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R7")

[node name="CH2_LV4_R7" parent="." instance=ExtResource("8_7lx3v")]
position = Vector2(0, 960)

[node name="Warp 0" parent="CH2_LV4_R7" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R6")

[node name="Warp 1" parent="CH2_LV4_R7" index="6" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R8")

[node name="CH2_LV4_R8" parent="." instance=ExtResource("9_a73yn")]
position = Vector2(1152, 928)

[node name="Warp 0" parent="CH2_LV4_R8" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R7")

[node name="Warp 1" parent="CH2_LV4_R8" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R9")

[node name="CH2_LV4_R9" parent="." instance=ExtResource("12_un3l5")]
position = Vector2(1792, 896)

[node name="Warp 0" parent="CH2_LV4_R9" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R8")

[node name="Warp 1" parent="CH2_LV4_R9" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R10")

[node name="CH2_LV4_R10" parent="." instance=ExtResource("13_nqouj")]
position = Vector2(0, 1440)

[node name="Warp 0" parent="CH2_LV4_R10" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R9")

[node name="Warp 1" parent="CH2_LV4_R10" index="6" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R11")

[node name="Checkpoint" parent="CH2_LV4_R10" index="12" node_paths=PackedStringArray("level_origin")]
level_origin = NodePath("../..")

[node name="CH2_LV4_R11" parent="." instance=ExtResource("14_eaof6")]
position = Vector2(1152, 1408)

[node name="Warp 0" parent="CH2_LV4_R11" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R10")

[node name="Warp 1" parent="CH2_LV4_R11" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R12")

[node name="CH2_LV4_R12" parent="." instance=ExtResource("26_tf8ny")]
position = Vector2(1792, 1360)

[node name="Warp 0" parent="CH2_LV4_R12" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R11")

[node name="Warp 1" parent="CH2_LV4_R12" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R13")

[node name="CH2_LV4_R13" parent="." instance=ExtResource("16_jregu")]
position = Vector2(0, 1888)

[node name="Warp 0" parent="CH2_LV4_R13" index="4" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R12")

[node name="Warp 1" parent="CH2_LV4_R13" index="5" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R15")

[node name="WarpDoor" parent="CH2_LV4_R13" index="6" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R14")
room_entrance_index = 0

[node name="MovingPlatform" parent="CH2_LV4_R13/Obstacles" index="4"]
curve = SubResource("Curve2D_xw261")

[node name="MovingPlatform2" parent="CH2_LV4_R13/Obstacles" index="11"]
curve = SubResource("Curve2D_qughq")

[node name="MovingPlatform3" parent="CH2_LV4_R13/Obstacles" index="14"]
curve = SubResource("Curve2D_06dn5")

[node name="MovingPlatform4" parent="CH2_LV4_R13/Obstacles" index="24"]
curve = SubResource("Curve2D_83rjt")

[node name="CH2_LV4_R14" parent="." instance=ExtResource("17_5ejir")]
position = Vector2(3968, 1440)

[node name="WarpDoor" parent="CH2_LV4_R14" index="2" node_paths=PackedStringArray("room_destination")]
room_destination = NodePath("../../CH2_LV4_R13")
room_entrance_index = 2

[node name="CH2_LV4_R15" parent="." instance=ExtResource("18_lxpqh")]
position = Vector2(3744, 1888)

[node name="Checkpoint" parent="CH2_LV4_R15" index="4" node_paths=PackedStringArray("level_origin", "subsequent_checkpoints")]
level_origin = NodePath("../..")
subsequent_checkpoints = [NodePath("../../CH2_LV4_R10/Checkpoint")]

[node name="BossDragonFruitSpawner" parent="CH2_LV4_R15" index="5" node_paths=PackedStringArray("player")]
player = NodePath("../../Player/Hub")

[node name="Impostor" parent="CH2_LV4_R15" index="10" node_paths=PackedStringArray("player_hub", "clear_timer", "normal_level_music_player", "textbox")]
player_hub = NodePath("../../Player/Hub")
clear_timer = NodePath("../../UI_Canvas/ClearTimer")
normal_level_music_player = NodePath("../../LevelMusicPlayer")
textbox = NodePath("../../Textbox")

[node name="UI_Canvas" type="CanvasLayer" parent="."]

[node name="TemperMeterUI" parent="UI_Canvas" node_paths=PackedStringArray("player_node") instance=ExtResource("4_vkg70")]
position = Vector2(1, 8)
player_node = NodePath("../../Player")

[node name="MagicMeterUI" parent="UI_Canvas" node_paths=PackedStringArray("player_node") instance=ExtResource("5_1ttpi")]
position = Vector2(88, 40)
player_node = NodePath("../../Player")

[node name="FragmentCounterUI" parent="UI_Canvas" node_paths=PackedStringArray("player_node", "level_ref") instance=ExtResource("6_53d36")]
position = Vector2(512, 0)
player_node = NodePath("../../Player")
level_ref = NodePath("../..")

[node name="ClearTimer" parent="UI_Canvas" instance=ExtResource("7_41jhx")]
position = Vector2(4, 316)

[node name="ResultsScreen" parent="UI_Canvas" node_paths=PackedStringArray("screen_fade", "level", "clear_timer", "textbox") instance=ExtResource("8_7u3u6")]
screen_fade = NodePath("../ScreenFade")
level = NodePath("../..")
clear_timer = NodePath("../ClearTimer")
textbox = NodePath("../../Textbox")
post_level_text = Array[String](["post level placeholder 1/3", "post level placeholder 2/3", "post level placeholder 3/3"])

[node name="PauseMenu" parent="UI_Canvas" node_paths=PackedStringArray("screen_fade") instance=ExtResource("9_xlu3u")]
screen_fade = NodePath("../ScreenFade")

[node name="ScreenFade" parent="UI_Canvas" instance=ExtResource("10_8ca3c")]
starting_fade_duration = 1.0

[node name="LevelIntroScreen" parent="UI_Canvas" instance=ExtResource("11_ttojs")]
chapter_char = "2"
section_char = "4"
level_name_left = "Insecurity"
level_name_right = "Intrusion"
subtitle_text = "Intruders in the Vault!"

[node name="Textbox" parent="." node_paths=PackedStringArray("ui_canvas") instance=ExtResource("11_nx3kn")]
accept_input_events = false
ui_canvas = NodePath("../UI_Canvas")

[node name="LevelMusicPlayer" parent="." instance=ExtResource("12_o50ci")]

[node name="DefeatScreen" parent="." node_paths=PackedStringArray("screen_fade") instance=ExtResource("13_w4xvx")]
screen_fade = NodePath("../UI_Canvas/ScreenFade")

[connection signal="player_defeated" from="." to="UI_Canvas/TemperMeterUI" method="hide"]
[connection signal="player_defeated" from="." to="UI_Canvas/MagicMeterUI" method="hide"]
[connection signal="player_defeated" from="." to="UI_Canvas/FragmentCounterUI" method="hide"]
[connection signal="player_defeated" from="." to="UI_Canvas/ClearTimer" method="stop_timer"]
[connection signal="player_defeated" from="." to="UI_Canvas/ClearTimer" method="hide"]
[connection signal="player_defeated" from="." to="Textbox" method="hide_textbox"]
[connection signal="player_defeated" from="." to="LevelMusicPlayer" method="stop"]
[connection signal="player_defeated" from="." to="DefeatScreen" method="do_defeat_screen"]
[connection signal="room_activated" from="CH2_LV4_R15" to="LevelMusicPlayer" method="fade_out"]
[connection signal="level_finished" from="CH2_LV4_R15/FinishLine" to="UI_Canvas/TemperMeterUI" method="hide"]
[connection signal="level_finished" from="CH2_LV4_R15/FinishLine" to="UI_Canvas/MagicMeterUI" method="hide"]
[connection signal="level_finished" from="CH2_LV4_R15/FinishLine" to="UI_Canvas/FragmentCounterUI" method="hide"]
[connection signal="level_finished" from="CH2_LV4_R15/FinishLine" to="UI_Canvas/ClearTimer" method="stop_timer"]
[connection signal="level_finished" from="CH2_LV4_R15/FinishLine" to="UI_Canvas/ClearTimer" method="hide"]
[connection signal="level_finished" from="CH2_LV4_R15/FinishLine" to="LevelMusicPlayer" method="fade_out"]
[connection signal="level_finished" from="CH2_LV4_R15/FinishLine" to="Player/Hub" method="set_force_stand" binds= [true]]

[editable path="Player"]
[editable path="CH2_LV4_R1"]
[editable path="CH2_LV4_R2"]
[editable path="CH2_LV4_R3"]
[editable path="CH2_LV4_R4"]
[editable path="CH2_LV4_R5"]
[editable path="CH2_LV4_R6"]
[editable path="CH2_LV4_R7"]
[editable path="CH2_LV4_R8"]
[editable path="CH2_LV4_R9"]
[editable path="CH2_LV4_R10"]
[editable path="CH2_LV4_R11"]
[editable path="CH2_LV4_R12"]
[editable path="CH2_LV4_R13"]
[editable path="CH2_LV4_R14"]
[editable path="CH2_LV4_R15"]
